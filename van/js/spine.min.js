/*! wsu-spine 2.0.2 2018-07-24 */
/*  See https://github.com/washingtonstateuniversity/WSU-spine/ for full source.*/

!(function(a) {
    'use strict';
    a.widget('ui.autosearch', a.ui.autocomplete, {
        _renderMenu: function(s, e) {
            var i = this,
                t = a.grep(e, function(e) {
                    return 'false' !== e.related;
                }),
                n = a.grep(e, function(e) {
                    return 'false' === e.related;
                });
            a.each(n, function(e, t) {
                    i._renderItemData(s, t);
                }),
                this.options.showRelated &&
                t.length &&
                (this.options.relatedHeader &&
                    i._renderHeader(s, this.options.relatedHeader),
                    a.each(t, function(e, t) {
                        i._renderItemData(s, t);
                    }));
        },
        _renderItemData: function(e, t) {
            return this._renderItem(e, t).data('ui-autocomplete-item', t);
        },
        _renderItem: function(e, t) {
            var s = t.label;
            return a('<li></li>').data('item.autocomplete', t).append(s).appendTo(e);
        },
        _renderHeader: function(e, t) {
            return a('<li></li>')
                .append("<a href=''>" + t + '</a>')
                .appendTo(e);
        },
    });
})(jQuery),
(function(l, s, e, c) {
    (l.fn.stripClass = function(e, t) {
        var s;
        return (
            (s = new RegExp((t ? '\\S+' : '\\b') + e + '\\S*', 'g')),
            this.attr('class', function(e, t) {
                if (t) return t.replace(s, '');
            }),
            this
        );
    }),
    (l.fn.refresh = function() {
        var e;
        (e = l(this.selector)), this.splice(0, this.length);
        try {
            this.push.apply(this, e);
        } catch (e) {
            return '' !== l(this.selector).html() ? l(this.selector) : l('<div>');
        }
        return this;
    }),
    (l.runTemplate = function(e, t) {
        var s, i, n, a, o, r;
        for (
            s = /<%(.+?)%>/g,
            r = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,
            o = 'var r=[];\n',
            a = 0,
            i = function(e, t) {
                return (
                    (o += t ?
                        e.match(r) ?
                        e + '\n' :
                        'r.push(' + e + ');\n' :
                        '' !== e ?
                        "r.push('" + e.replace(/'/g, '"') + "');\n" :
                        ''),
                    i
                );
            };
            (n = s.exec(e));

        )
            i(e.slice(a, n.index))(n[1], !0), (a = n.index + n[0].length);
        return (
            i(e.substr(a, e.length - a)),
            (o = (o + "return r.join('');").replace(/[\r\t\n]/g, '')),
            new Function(o).apply(t)
        );
    }),
    (l.whenAll = function() {
        return l.when.apply(l, arguments);
    }),
    (l.is_iOS = function() {
        return !!s.navigator.userAgent.match(/(iPad|iPhone|iPod)/gi);
    }),
    (l.is_Android = function() {
        return !!s.navigator.userAgent.match(/(Android)/gi);
    }),
    (l.svg_enabled = function() {
        return e.implementation.hasFeature(
            'http://www.w3.org/TR/SVG11/feature#Image',
            '1.1'
        );
    }),
    (l.observeDOM = function(t, i) {
        var e;
        s.MutationObserver ?
            ((e = {
                    childList: !0,
                    attributes: !0,
                    subtree: !0,
                    attributeOldValue: !0,
                    attributeFilter: ['class', 'style'],
                }),
                new MutationObserver(function(e) {
                    var s = !1;
                    l.each(e, function(e, t) {
                            'childList' === t.type ?
                                0 < t.addedNodes.length ?
                                (s = !0) :
                                0 < t.removedNodes.length && (s = !0) :
                                'attributes' === t.type &&
                                'class' === t.attributeName &&
                                (s = !0);
                        }),
                        s && i();
                }).observe(t[0], e)) :
            s.setTimeout(function() {
                var e = t.refresh();
                void 0 === s.obj_watch && (s.obj_watch = e[0]),
                    s.obj_watch !== e[0] && i(),
                    (s.obj_watch = e[0]),
                    l.observeDOM(e, i);
            }, 200);
    }),
    (l.s = function(o, e) {
        var r;
        (r = o.split('.')[0]),
        (o = o.split('.')[1]),
        (l[r] = l[r] || {}),
        (l[r][o] = function(e, t) {
            arguments.length && this._setup(e, t);
        }),
        (l[r][o].prototype = l.extend({ namespace: r, pluginName: o }, e)),
        (l.fn[o] = function(t) {
            var s, i, n, a;
            return (
                (i = {}),
                arguments[1] && (i = arguments[1]),
                (t = t || {}),
                (this.options = l.extend({}, t)),
                (s = 'string' == typeof t),
                (n = Array.prototype.slice.call(arguments, 1)),
                (a = this),
                (s && '_' === t.substring(0, 1)) ||
                this.each(function() {
                    var e;
                    (e = l.data(this, o)) ||
                    (e = l.data(this, o, new l[r][o](t, this))),
                    e[t + '_init'] !== c && e[t + '_init'] && e[t + '_init'](i),
                        s && e[t] !== c && (a = e[t].apply(e, n));
                }),
                a
            );
        });
    }),
    l.s('ui.spine', {
            globals: { version: '0.1.0', current_url: s.location.href },
            options: {},
            _setup: function(e, t) {
                (this.el = t),
                (e = e || {}),
                l.extend(this.options, e, {}),
                    this._create();
            },
            _create: function() {
                (this.instance = {
                    spine: this.options,
                    framework: [],
                    search: [],
                    social: [],
                }),
                this._call(this.options.callback, this.instance.spine);
            },
            _set_globals: function(e, t) {
                'object' == typeof e && l.extend(this.globals, e);
            },
            _get_globals: function(e) {
                return this.globals[e];
            },
            clear: function(e) {
                return this._c(this.get(e)), this.set(e, []), this;
            },
            _c: function(e) {
                for (var t in e) e.hasOwnProperty(t) && (e[t] = null);
            },
            find: function(e, t, s) {
                var i, n, a, o;
                for (a in ((i = this.get(e)),
                        (t.value = l.isArray(t.value) ? t.value : [t.value]),
                        i))
                    if (i.hasOwnProperty(a)) {
                        for (o in ((n = !1), t.value))
                            if (-1 < l.inArray(t.value[o], i[a][t.property])) n = !0;
                            else if (t.operator && 'AND' === t.operator) {
                            n = !1;
                            break;
                        }
                        s(i[a], n);
                    }
                return this;
            },
            get: function(e, t) {
                var s, i, n;
                if (!(s = this.instance)[e]) {
                    if (-1 < e.indexOf('>')) {
                        for (
                            i = e.replace(/ /g, '').split('>'), n = 0; n < i.length; n++
                        ) {
                            if (!s[i[n]]) {
                                if (!t) return null;
                                s[i[n]] = n + 1 < i.length ? [] : t;
                            }
                            s = s[i[n]];
                        }
                        return s;
                    }
                    t && !s[e] && this.set(e, t);
                }
                return s[e];
            },
            set: function(e, t) {
                return (this.instance[e] = t), this;
            },
            _unwrap: function(e) {
                return e ?
                    e instanceof jQuery ?
                    e[0] :
                    e instanceof Object ?
                    e :
                    l('#' + e)[0] :
                    null;
            },
            _call: function(e) {
                e &&
                    l.isFunction(e) &&
                    e.apply(this, Array.prototype.slice.call(arguments, 1));
            },
            clear_spine: function() {
                this.clear('search').clear('framework').clear('social');
            },
            destroy: function(e) {
                this.clear('search')
                    .clear('framework')
                    .clear('social')
                    ._c(this.instance),
                    l.removeData(this.el, this.name),
                    this._call(e, this);
            },
        }),
        (l.spine = function(e) {
            var t;
            return (
                (t = this.jquery === c ? l('body') : this),
                l.each(t, function() {
                    var s;
                    (s = l(this)).spine({}),
                        (e = l.extend({ framework: {}, search: {}, social: {} }, e)),
                        l.each(e, function(e, t) {
                            s.spine(e, t);
                        });
                })
            );
        });
})(jQuery, window, document),
(function(p) {
    p.extend(p.ui.spine.prototype, {
        framework_init: function(e) {
            p.extend(this.framework_options, e),
                this._set_globals(this.framework_globals),
                this.framework_create();
        },
        framework_options: {
            viewport_offset: 0,
            equalizer_filter: '.skip*',
            contact_template: "<address itemscope itemtype='http://schema.org/Organization' class='hcard'><% if (typeof(this.department) != 'undefined') { %><div class='organization-unit fn org'><% if (typeof(this.url) != 'undefined') { %><a href='<%this.url%>' class='url'><% } %><%this.department%><% if (typeof(this.url) != 'undefined') { %></a><% } %></div><% } %> <% if (typeof(this.name) != 'undefined') { %><div class='organization-name'><%this.name%></div><% } %><div class='address'><% if (typeof(this.streetAddress) != 'undefined') { %><div class='street-address'><%this.streetAddress%></div><% } %><% if (typeof(this.addressLocality) != 'undefined' || typeof(this.postalCode) != 'undefined') { %><div class='locality'><% if (typeof(this.addressLocality) != 'undefined' ) { %><%this.addressLocality%><% } %><% if (typeof(this.addressRegion) != 'undefined' ) { %>, <%this.addressRegion%><% } %><% if (typeof(this.postalCode) != 'undefined' ) { %> <span class='postalcode'><%this.postalCode%></span><% } %></div><% } %></div><% if (typeof(this.telephone) != 'undefined' ) { %><div class='tel'><%this.telephone%></div><% } %><% if (typeof(this.email) != 'undefined' ) { %><div class='email' rel='email'><a href='mailto:<%this.email%>'>Email us</a></div><% } %><% if (typeof(this.ContactPoint) != 'undefined' && typeof(this.ContactPointTitle) != 'undefined') { %><div class='more'><a href='<%this.ContactPoint%>'><%this.ContactPointTitle%></a></div><% } %></address>",
        },
        framework_globals: {
            spine: p('#spine'),
            glue: p('#glue'),
            main: p('main'),
            wsu_actions: p('#wsu-actions'),
        },
        nav_state: {
            viewport_ht: 0,
            scroll_dif: 0,
            positionLock: 0,
            scroll_top: 0,
            spine_ht: 0,
            glue_ht: 0,
            height_dif: 0,
        },
        setup_nav_scroll: function() {
            p('#glue').wrapInner("<div id='scroll'>"),
                p('#spine header').insertBefore(p('#glue'));
        },
        is_mobile_view: function() {
            return window.matchMedia ?
                window.matchMedia('(max-width: 989px)').matches :
                !!window.styleMedia &&
                window.styleMedia.matchMedium('(max-width: 989px)');
        },
        set_spine_state: function(e) {
            'mobile' === e
                ?
                (p('html').removeClass('spine-full').addClass('ios spine-mobile'),
                    this.setup_nav_scroll()) :
                (p('html')
                    .removeClass('ios spine-mobile spine-mobile-open')
                    .addClass('spine-full'),
                    p('#scroll').length &&
                    (p('#wsu-actions').unwrap(),
                        p('#spine header').prependTo('#glue')));
        },
        has_mobile_state: function() {
            return !!p('html').hasClass('spine-mobile');
        },
        framework_adjust_on_resize: function() {
            var e, t, s, i, n, a, o, r, l, c, u;
            (c = (e = this)._get_globals('spine').refresh()),
            (u = e._get_globals('glue').refresh()),
            e._get_globals('main').refresh(),
                e.is_mobile_view() && !e.has_mobile_state() ?
                e.set_spine_state('mobile') :
                !e.is_mobile_view() &&
                e.has_mobile_state() &&
                e.set_spine_state('full'),
                e.sizing(),
                e.equalizing(),
                e.is_mobile_view() && e.mainheight(),
                p('.unbound, #binder.broken').length &&
                ((t = p(window).width()),
                    (s = e._get_globals('main').offset().left),
                    (i = e._get_globals('main').width()),
                    (a = t - e._get_globals('main').offset().left),
                    (o = ''),
                    (o = i <= a ? a - i : 0),
                    p('#binder').is('.broken') &&
                    e._get_globals('main').css('width', a),
                    (r = s + e._get_globals('main').width()),
                    p('.unbound:not(.element).recto')
                    .css('width', a)
                    .css('margin-right', -o),
                    p('.unbound.element.recto').each(function() {
                        (n = p(this).width()),
                        p(this)
                            .css('width', n + o)
                            .css('margin-right', -o);
                    }),
                    p('.unbound.verso').css('width', r).css('margin-left', -s),
                    p('.unbound.verso.recto').css('width', t)),
                (l = p(window).height() - this.framework_options.viewport_offset),
                e.is_mobile_view() ?
                (u.css('min-height', ''), c.css('min-height', '')) :
                (u.css('min-height', l),
                    c.css('min-height', l),
                    p(document).trigger('scroll'));
        },
        framework_create: function() {
            var e,
                t,
                s,
                i = {};
            (e = this),
            p('#wsu-contact').length ||
                ((t =
                        "<section id='wsu-contact' class='spine-contact spine-action closed'>"),
                    (i = {}),
                    p.each(
                        p("[itemtype='http://schema.org/Organization']"),
                        function() {
                            p.each(p(this).find('[itemprop]'), function(e, t) {
                                    var s = {};
                                    (s[p(t).attr('itemprop')] = p(t).attr('content')),
                                    p.extend(i, s);
                                }),
                                (t += p.runTemplate(e.framework_options.contact_template, i));
                        }
                    ),
                    (t += '</section>'),
                    e.setup_tabs('contact', t)),
                e.setup_nav(),
                e.is_mobile_view() ?
                e.set_spine_state('mobile') :
                p('html').addClass('spine-full'),
                p.svg_enabled() ||
                (p('html').addClass('nosvg'),
                    (s = p("img[src$='.svg']")).length &&
                    p.each(s, function() {
                        p(this).attr(
                            'src',
                            p(this).attr('src').replace('.svg', '.png')
                        );
                    })),
                e.setup_spine(),
                e.setup_printing(),
                p(window)
                .on('resize orientationchange', function() {
                    e.framework_adjust_on_resize();
                })
                .trigger('resize'),
                e.is_mobile_view() || p(document).trigger('scroll');
        },
        sizing: function(e) {
            var t, s, i, n, a;
            (e = e || p('#jacket')),
            (n =
                'size-medium size-lt-xlarge size-lt-large size-gt-intermediate size-gt-smallish size-gt-small'),
            (a =
                'size-large size-lt-xlarge size-gt-small size-gt-intermediate size-gt-smallish size-gt-medium'),
            (i = ''),
            1188 <= (t = p(window).width()) ?
                (s =
                    'size-xlarge size-gt-small size-gt-intermediate size-gt-smallish size-gt-medium size-gt-large') :
                990 <= t ?
                (s = a) :
                t < 990 && 792 <= t ?
                ((i = 'size-lt-990'), (s = p('#binder').is('.fluid') ? a : n)) :
                t < 792 && 694 <= t ?
                ((i = 'size-lt-792'),
                    (s = p('#binder').is('.fixed') ?
                        'size-intermediate size-smallish size-lt-medium size-lt-large size-lt-xlarge size-gt-small' :
                        n)) :
                (s =
                    t < 694 && 396 <= t ?
                    'size-small size-lt-intermediate size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge' :
                    'size-small size-lt-small size-lt-intermediate size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge'),
                e.stripClass('size-').addClass(s + ' ' + i);
        },
        equalizing: function() {
            var t;
            p('.equalize').length &&
                ((t = p('.equalize')).find('.column').css('min-height', ''),
                    p.each(t, function() {
                        var e = 0;
                        p.each(p('.column', this), function() {
                                e = p(this).outerHeight() > e ? p(this).outerHeight() : e;
                            }),
                            (p(window).width() <= 792 && !t.is('.equalize-medium')) ||
                            (p(window).width() <= 694 && !t.is('.equalize-small')) ?
                            p('.column', this).not('.unequaled').css('min-height', '1') :
                            p('.column', this).not('.unequaled').css('min-height', e),
                            p('section.equalize .column', this).css('min-height', 'auto');
                    }));
        },
        mainheight: function() {
            var e;
            this._get_globals('main').refresh().offset() &&
                ((e = p(window).height()),
                    p('#binder').is('.size-lt-large') && (e -= 50),
                    p('main:not(.height-auto)').css('min-height', e));
        },
        setup_jacket: function() {},
        setup_binder: function() {},
        setup_content: function() {},
        toggle_mobile_nav: function(e) {
            var t, s, i, n, a;
            void 0 !== e && e.preventDefault(),
                (t = p('html')),
                (s = p('body')),
                (i = p('#shelve')),
                p.ui.spine.prototype._get_globals('spine').refresh(),
                (n = p.ui.spine.prototype._get_globals('glue').refresh()),
                (a =
                    'transitionend webkitTransitionEnd otransitionend MSTransitionEnd'),
                s.addClass('spine-animating'),
                t.hasClass('spine-mobile-open') ?
                (s.addClass('spine-move-left'), i.attr('aria-expanded', 'false')) :
                (s.addClass('spine-move-right'), i.attr('aria-expanded', 'true')),
                n.on(a, function() {
                    if (
                        (s.removeClass(
                                'spine-animating spine-move-left spine-move-right'
                            ),
                            t.hasClass('spine-mobile-open'))
                    )
                        t.removeClass('spine-mobile-open'),
                        p('#scroll').off('touchstart'),
                        p(document).off('touchmove touchend touchstart');
                    else {
                        t.addClass('spine-mobile-open');
                        var i = document.querySelector('#scroll');
                        i.addEventListener('touchstart', function() {
                                var e = i.scrollTop,
                                    t = i.scrollHeight,
                                    s = e + i.offsetHeight;
                                0 === e ? (i.scrollTop = 1) : s === t && (i.scrollTop = e - 1);
                            }),
                            p(document).on('touchmove touchend touchstart', function(e) {
                                if (
                                    0 < p(e.target).parents('#scroll').length ||
                                    p(e.target).is('#scroll')
                                )
                                    return !0;
                                e.stopPropagation(), e.preventDefault();
                            });
                    }
                    n.off(a);
                });
        },
        setup_spine: function() {
            var t, s, e, i, n, a, o, r;
            if (
                (p('#spine .spine-header').prepend(
                        "<button id='shelve' type='button' aria-label='Site Navigation' aria-haspopup='true' aria-controls='glue' aria-expanded='false' />"
                    ),
                    (s = (t = this)._get_globals('spine').refresh()),
                    (e = t._get_globals('glue').refresh()),
                    (i = t._get_globals('main').refresh()),
                    (t.nav_state.scroll_top = 0),
                    (t.nav_state.scroll_dif = 0),
                    (t.nav_state.positionLock = 0),
                    p('.spine-header').on(
                        'click touchend',
                        '#shelve',
                        t.toggle_mobile_nav
                    ),
                    i.on('click', function(e) {
                        p('html').hasClass('spine-mobile-open') && t.toggle_mobile_nav(e);
                    }),
                    t.is_mobile_view() ||
                    (p.observeDOM(e, function() {
                            t.apply_nav_func(t);
                        }),
                        p(document).on('scroll', function() {
                            t.apply_nav_func(t);
                        }),
                        p(document).keydown(function(e) {
                            (35 !== e.which && 36 !== e.which) ||
                            ((n = p(window).height()),
                                (a = s[0].scrollHeight),
                                (o = n - a),
                                35 === e.which ? (r = o) : 36 === e.which && (r = 0),
                                s.css({ position: 'fixed', top: r + 'px' }),
                                (t.nav_state.positionLock = r));
                        }),
                        p(document).scroll(function() {
                            148 < p(document).scrollTop() ?
                                p('#spine').addClass('skimmed') :
                                p('#spine').removeClass('skimmed');
                        })),
                    t.is_mobile_view())
            ) {
                var l =
                    p('.spine-header').height() +
                    p('#wsu-actions').height() +
                    p('#spine-navigation').height(),
                    c = p('.spine-footer'),
                    u = c.height();
                if (window.innerHeight - l >= u) {
                    var h = window.innerHeight - l - u;
                    c.css('margin-top', h);
                }
            }
        },
        apply_nav_func: function(e) {
            var t, s, i, n, a, o, r, l;
            if (
                ((t = e._get_globals('spine').refresh()),
                    (s = e._get_globals('glue').refresh()),
                    (i = e._get_globals('main').refresh()),
                    (a = e.nav_state.scroll_top),
                    (o = e.nav_state.positionLock),
                    (r = a - (n = p(document).scrollTop())),
                    (a = n),
                    (l = s.height()),
                    (e.nav_state.scroll_top = a),
                    i.css({ 'min-height': l }),
                    i.outerHeight(!0) > l)
            ) {
                var c = l - window.innerHeight;
                0 < (o += r) && (o = 0),
                    o < -1 * c && (o = -1 * c - this.framework_options.viewport_offset),
                    t.css({ position: 'fixed', top: o + 'px' }),
                    (e.nav_state.positionLock = o);
            } else t.is('#spine[style]') && t.removeAttr('style');
        },
        _toggle_spine_action_item: function(e) {
            var t, s;
            e.preventDefault(),
                (t = p(e.target).parent('li').attr('id').split('-')[1]),
                p('#wsu-actions')
                .find('*.opened, #wsu-' + t + ', #wsu-' + t + '-tab')
                .toggleClass('opened closed'),
                p(e.target).parent('li').hasClass('opened') ?
                p('#spine-navigation, .spine-footer').css('visibility', 'hidden') :
                p('#spine-navigation, .spine-footer').css(
                    'visibility',
                    'initial'
                ),
                (s =
                    window.innerHeight -
                    p('.spine-header').outerHeight() -
                    p('#wsu-actions-tabs').outerHeight()),
                p('.spine-action.opened').css('min-height', s),
                p(e.target).off(
                    'mouseup touchend',
                    p.ui.spine.prototype._toggle_spine_action_item
                );
        },
        setup_tabs: function(t, e) {
            var s, i;
            (e = e || ''),
            (s = this._get_globals('wsu_actions').refresh()),
            p('#wsu-' + t + '-tab').append(e),
                this.is_mobile_view() ?
                p('#wsu-' + t + '-tab > button').on(
                    'mousedown touchstart',
                    function(e) {
                        p(e.target).on(
                                'mouseup touchend',
                                p.ui.spine.prototype._toggle_spine_action_item
                            ),
                            p(e.target).on('mousemove touchmove', function(e) {
                                p(e.target).off(
                                    'mouseup touchend',
                                    p.ui.spine.prototype._toggle_spine_action_item
                                );
                            });
                    }
                ) :
                p('#wsu-' + t + '-tab > button').on('click', function(e) {
                    e.preventDefault(),
                        s
                        .find('*.opened,#wsu-' + t + ',#wsu-' + t + '-tab')
                        .toggleClass('opened closed'),
                        p('#wsu-' + t + '-tab').hasClass('opened') ?
                        p('#spine-navigation, .spine-footer').css(
                            'visibility',
                            'hidden'
                        ) :
                        p('#spine-navigation, .spine-footer').css(
                            'visibility',
                            'initial'
                        ),
                        (i =
                            window.innerHeight -
                            p('.spine-header').outerHeight() -
                            p('#wsu-actions-tabs').outerHeight()),
                        p('.spine-action.opened').css('min-height', i);
                });
        },
        _toggle_spine_nav_list: function(e) {
            var t = p(e.target);
            e.preventDefault(),
                t.closest('li').toggleClass('opened'),
                t.off(
                    'mouseup touchend',
                    p.ui.spine.prototype._toggle_spine_nav_list
                );
        },
        setup_nav: function() {
            p('#spine nav ul, #spine ul').parents('li').addClass('parent');
            var e = p('#spine nav li.parent > a');
            p('#spine .active:not(:has(.active))').addClass('dogeared'),
                e.each(function() {
                    var e, t;
                    if ('#' !== (e = p(this)).attr('href')) {
                        var s = 'overview';
                        e.closest('.parent').is('.dogeared') && (s += ' dogeared'),
                            (t = e.is('[title]') ? e.attr('title') : 'Overview'),
                            (t =
                                0 <
                                (t = e.is('[data-overview]') ? e.data('overview') : t).length ?
                                t :
                                'Overview'),
                            e
                            .parent('li')
                            .children('ul')
                            .prepend("<li class='" + s + "'></li>"),
                            e
                            .clone(!0, !0)
                            .appendTo(e.parent('li').find('ul .overview:first')),
                            e.parent('li').find('ul .overview:first a').html(t),
                            e.parent('li').hasClass('active') &&
                            e
                            .parents('li')
                            .removeClass('active')
                            .addClass('opened dogeared');
                    }
                }),
                p('#spine nav li[class*=current], #spine nav li[class*=active]')
                .addClass('active dogeared')
                .parents('li')
                .addClass('opened dogeared'),
                p('#spine nav li a[class*=current], #spine nav li a[class*=active]')
                .parents('li')
                .addClass('active dogeared'),
                this.is_mobile_view() ?
                e.on('mousedown touchstart', function(e) {
                    p(e.target).on(
                            'mouseup touchend',
                            p.ui.spine.prototype._toggle_spine_nav_list
                        ),
                        p(e.target).on('mousemove touchmove', function(e) {
                            p(e.target).off(
                                'mouseup touchend',
                                p.ui.spine.prototype._toggle_spine_nav_list
                            );
                        });
                }) :
                (e.on('click', function(e) {
                        e.preventDefault(),
                            p(e.target).closest('li').toggleClass('opened');
                    }),
                    p("main a[href*='#']:not([href*='://'])").on(
                        'mouseup',
                        function() {
                            p(document).trigger('scroll');
                        }
                    )),
                // code change by Niki Dixon on 11/15/2020
                p(
                    ".spine-navigation a[href^='http']:not([href*='://" +
                    window.location.hostname +
                    "'])"
                ).addClass('placeholder');
            // This block of code above was making every link external by adding an arrow next to it.
            // In the spine.min.css, every link with the "external" class gets the arrow next to it automatically.
            // Cutting this code out causes errors unfortunately, so I made it add a dummy class instead
            // of the external class. So in effect, it does nothing.
            // I have a different script called fixLinks.js that adds external links to the ones that are
            // external in the WSU libraries homepage.
        },
        setup_printing: function() {
            var t, s, i;

            function n() {
                p('html').toggleClass('print'), p('.print-controls').remove();
            }
            (t = this._get_globals('spine').refresh()),
            (s = this._get_globals('wsu_actions').refresh()),
            (i =
                "<span class='print-controls'><button id='print-invoke'>Print</button><button id='print-cancel'>Cancel</button></span>"),
            p('#wsu-print-tab button').click(function(e) {
                    void 0 !== e && e.preventDefault(),
                        s.find('.opened').toggleClass('opened closed'),
                        p('html').toggleClass('print'),
                        t.find('header').prepend(i),
                        p('.unshelved').removeClass('unshelved').addClass('shelved'),
                        p('#print-invoke').on('click', function() {
                            window.print();
                        }),
                        p('#print-cancel').on('click', n),
                        window.setTimeout(function() {
                            window.print();
                        }, 400);
                }),
                p('button.shut').on('click touchend', function(e) {
                    e.preventDefault(), s.find('.opened').toggleClass('opened closed');
                });
        },
    });
})(jQuery),
(function(r) {
    'use strict';
    r.extend(r.ui.spine.prototype, {
        search_init: function(e) {
            r.extend(e, this.search_options, e),
                this._set_globals(this.search_globals),
                this.create_search();
        },
        search_options: {
            data: [],
            providers: {
                nav: {
                    name: 'From Navigation',
                    nodes: '.spine-navigation',
                    dataType: 'html',
                    maxRows: 12,
                    urlSpaces: '%20',
                },
                atoz: {
                    name: 'WSU A to Z index',
                    url: 'https://search.wsu.edu/2013service/searchservice/search.asmx/AZSearch',
                    urlSpaces: '+',
                    dataType: 'jsonp',
                    featureClass: 'P',
                    style: 'full',
                    maxRows: 12,
                    termTemplate: '<strong><%this.term%></strong>',
                    resultTemplate: '',
                },
            },
            search: {
                minLength: 2,
                maxRows: 12,
                getRelated: !0,
                urlSpaces: '+',
                tabTemplate: "<section id='wsu-search' class='spine-search spine-action closed'><form id='default-search'><input name='term' type='text' value='' placeholder='search' title='Type search term here'><button type='submit'>Submit</button></form><div id='spine-shortcuts' class='spine-shortcuts'></div></section>",
            },
            result: {
                appendTo: '#spine-shortcuts',
                showRelated: !0,
                target: '_blank',
                relatedHeader: "<b class='related_sep'>Related</b><hr/>",
                providerHeader: "<b class='provider_header'><%this.provider_name%></b><hr/>",
                termTemplate: '<b><%this.term%></b>',
                template: '<li><%this.searchitem%></li>',
            },
        },
        search_globals: {
            wsu_search: r('#wsu-search'),
            search_input: r('#wsu-search input[type=text]'),
        },
        create_search: function() {
            var e, t, s;
            (t = (e = this)._get_globals('wsu_search').refresh()).length
                ?
                ((s =
                        "<section id='wsu-search' class='spine-search spine-action closed'>" +
                        t.html() +
                        '</section>'),
                    t.remove()) :
                (s = r.runTemplate(e.search_options.search.tabTemplate, {})),
                this.setup_tabs('search', s),
                r('#spine-shortcuts').length <= 0 &&
                r('#wsu-search').append(
                    "<div id='spine-shortcuts' class='spine-shortcuts'></div>"
                ),
                r('#wsu-search-tab button').on('click touchend', function() {
                    e._get_globals('search_input').refresh().focus();
                }),
                this.setup_search();
        },
        start_search: function(e, t) {
            var n,
                a,
                s = [];
            (n = this),
            (a = r.trim(e.term)),
            (n.search_options.data = []),
            r.each(n.search_options.providers, function(e, t) {
                    (r.ui.autocomplete.prototype.options.termTemplate =
                        void 0 !== typeof t.termTemplate && '' !== t.termTemplate ?
                        t.termTemplate :
                        void 0),
                    s.push(n.run_query(a, t));
                }),
                r.when.apply(r, s).done(function() {
                    r.each(arguments, function(e, t) {
                            var s, i;
                            void 0 !== t &&
                                void 0 !== (s = t[0]) &&
                                0 < s.length &&
                                ((i = n.setup_result_obj(a, s)),
                                    r.merge(n.search_options.data, i));
                        }),
                        n._call(t, n.search_options.data);
                });
        },
        run_query: function(a, e) {
            var t,
                o = [];
            return (
                this, [],
                void 0 !== typeof e && void 0 !== typeof e.url && void 0 === e.nodes ?
                r.ajax({
                    url: e.url,
                    dataType: e.dataType,
                    data: {
                        featureClass: e.featureClass,
                        style: e.style,
                        maxRows: e.maxRows,
                        name_startsWith: a,
                        related: this.search_options.search.getRelated,
                    },
                }) :
                void 0 !== typeof e && void 0 !== typeof e.nodes ?
                ((t = r(e.nodes).find('a')),
                    r.each(t, function(e, t) {
                        var s, i, n; -
                        1 <
                            (i = (s = r(t)).text())
                            .toLowerCase()
                            .indexOf(a.toLowerCase()) &&
                            '#' !== s.attr('href') &&
                            ((n = {
                                    label: i,
                                    value: s.attr('href'),
                                    related: 'false',
                                    searchKeywords: '',
                                }),
                                o.push(n));
                    }), [o]) :
                void 0
            );
        },
        format_result_text: function(e, t, s) {
            var i;
            return (
                this,
                '<strong>$1</strong>',
                (i =
                    '(?![^&;]+;)(?!<[^<>]*)(' +
                    r.ui.autocomplete.escapeRegex(e) +
                    ')(?![^<>]*>)(?![^&;]+;)'),
                (t =
                    "<a href='" +
                    s +
                    "' target='" +
                    this.search_options.result.target +
                    "'>" +
                    t.replace(new RegExp(i, 'gi'), '<strong>$1</strong>') +
                    '</a>')
            );
        },
        setup_result_obj: function(i, e) {
            var n, a;
            return (
                (n = this),
                (a = new RegExp(r.ui.autocomplete.escapeRegex(i), 'i')),
                r.map(e, function(e) {
                    var t, s;
                    if (
                        ((t = e.label),
                            (s = e.value),
                            (e.value && (!i || a.test(t))) || 'true' === e.related)
                    )
                        return {
                            label: (t = n.format_result_text(i, t, s)),
                            value: e.value,
                            searchKeywords: void 0 !== e.searchKeywords ? e.searchKeywords : 'false',
                            related: void 0 !== e.related ? e.related : 'false',
                        };
                })
            );
        },
        setup_search: function() {
            var s, i, n;
            (i = (s = this)._get_globals('wsu_search').refresh()),
            (n = s._get_globals('search_input').refresh()),
            n
                .autosearch({
                    appendTo: s.search_options.result.appendTo,
                    showRelated: s.search_options.result.showRelated,
                    relatedHeader: s.search_options.result.relatedHeader,
                    minLength: s.search_options.search.minLength,
                    source: function(e, t) {
                        s.start_search(e, function(e) {
                            t(e);
                        });
                    },
                    search: function() {
                        ({});
                    },
                    select: function(e, t) {
                        var s;
                        return (
                            t.item.searchKeywords,
                            (s = r(t.item.label).text()),
                            n.val(s),
                            n.autosearch('close'), !1
                        );
                    },
                    focus: function(e, t) {
                        n.val(r(t.item.label).text()), { label: t.item.label },
                            e.preventDefault();
                    },
                    open: function() {},
                    close: function(e) {
                        return e.preventDefault(), !1;
                    },
                })
                .data('autosearch'),
                r('#wsu-search form').submit(function() {
                    var e, t, s;
                    return (
                        (e = i.attr('data-default')),
                        (t = ' site:' + window.location.hostname),
                        'wsu.edu' === e && (t = ''),
                        'cx=004677039204386950923:xvo7gapmrrg',
                        'cof=FORID%3A11',
                        (s =
                            'https://search.wsu.edu/default.aspx?cx=004677039204386950923:xvo7gapmrrg&cof=FORID%3A11&q=' +
                            n.val() +
                            t),
                        (window.location.href = s), !1
                    );
                });
        },
    });
})(jQuery),
(function(t) {
    t.extend(t.ui.spine.prototype, {
        social_init: function(e) {
            t.extend(this.social_options, e),
                this._set_globals(this.social_globals),
                this.social_create();
        },
        social_options: {
            share_text: 'You should know ...',
            twitter_text: 'You should know...',
            twitter_handle: 'wsupullman',
            linkedin_source: 'wsu.edu',
        },
        social_globals: { share_block: t('#wsu-share') },
        social_create: function() {
            var e, t, s, i, n;
            this._get_globals('share_block').refresh().length ||
                ((e = encodeURIComponent(this.social_options.share_text)),
                    (i = encodeURIComponent(this.social_options.twitter_text)),
                    (n = encodeURIComponent(this.social_options.twitter_handle)),
                    (t = this._get_globals('current_url')),
                    this._get_globals('wsu_actions').refresh(),
                    (s =
                        "<section id='wsu-share' class='spine-share spine-action closed'>"),
                    (s += '<ul>'),
                    (s +=
                        "<li class='by-facebook'><a href='https://www.facebook.com/sharer/sharer.php?u=" +
                        t +
                        "'><span class='screen-reader-text'>Share this URL on </span>Facebook</a></li>"),
                    (s +=
                        "<li class='by-twitter'><a href='https://twitter.com/intent/tweet?text=" +
                        i +
                        '&url=' +
                        t),
                    (s +=
                        '&via=' +
                        n +
                        "' target='_blank'><span class='screen-reader-text'>Share this URL on </span>Twitter</a></li>"),
                    (s +=
                        "<li class='by-googleplus'><a href='https://plus.google.com/share?url=" +
                        t +
                        "'><span class='screen-reader-text'>Share this URL on </span>Google+</a></li>"),
                    (s +=
                        "<li class='by-linkedin'><a href='https://www.linkedin.com/shareArticle?mini=true&url=" +
                        t +
                        '&summary='),
                    (s +=
                        e +
                        '&source=' +
                        void 0 +
                        "' target='_blank'><span class='screen-reader-text'>Share this URL on </span>Linkedin</a></li>"),
                    (s +=
                        "<li class='by-email'><a href='mailto:?subject=" +
                        e +
                        '&body=' +
                        t +
                        "'><span class='screen-reader-text'>Share this URL with </span>Email</a></li>"),
                    (s += '</ul>'),
                    (s += '</section>'),
                    this.setup_tabs('share', s));
        },
    });
})(jQuery),
(function(t) {
    'use strict';
    t(document).ready(function() {
        t('html').removeClass('no-js').addClass('js');
        var e = window.spineoptions || {};
        t.spine(e);
    });
})(jQuery);
(function($) {
    $(document).ready(function() {
        $('#spine').keydown(function(e) {
            if (e.keyCode == 27) {
                $('#shelve').trigger('click');
            }
        });
    });
})(jQuery);